(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,n){e.exports={app:"App_app__267Kc",load_more:"App_load_more__1erRY"}},11:function(e,t,n){e.exports={item:"ImageGalleryItem_item__jtPdE",image:"ImageGalleryItem_image__1iqWw"}},12:function(e,t,n){e.exports={overlay:"modal_overlay__1GeeW",modal:"modal_modal__1EPO8"}},14:function(e,t,n){e.exports={gallery:"ImageGallery_gallery__1JJl_"}},16:function(e,t,n){e.exports={button:"Button_button__3A6rp"}},18:function(e,t,n){e.exports={spinner:"spinner_spinner__RtWq2"}},24:function(e,t,n){},4:function(e,t,n){e.exports={searchbar:"Searchbar_searchbar__1mdWv",form:"Searchbar_form__25DYF",button:"Searchbar_button__11n2B",button_label:"Searchbar_button_label__3RN_H",input:"Searchbar_input__3gSFO"}},55:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(7),o=n.n(r),s=(n(23),n(24),n(13)),i=n(3),l=n(10),u=n.n(l),b="22270457-bda83cd2dccc8760a40b76a07",j="https://pixabay.com/api/",d=12;var m=n(4),h=n.n(m),O=n(0);function p(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1];return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("header",{className:h.a.searchbar,children:Object(O.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),""===c.trim())return alert("\u0437\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u043f\u043e\u043b\u0435 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430");e.onSubmit(c),r("")},className:h.a.form,children:[Object(O.jsx)("button",{type:"submit",className:h.a.button,children:Object(O.jsx)("span",{className:h.a.button_label,children:"Search"})}),Object(O.jsx)("input",{className:h.a.input,type:"text",autoComplete:"off",value:c,autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){r(e.currentTarget.value.toLowerCase())}})]})})})}var f=n(14),_=n.n(f);var g=function(e){var t=e.children;return Object(O.jsx)("div",{children:Object(O.jsx)("ul",{className:_.a.gallery,children:t})})},x=n(15),v=n.n(x),S=n(11),y=n.n(S);var w=function(e){var t=e.images,n=e.onOpenModal;return Object(O.jsx)(O.Fragment,{children:t.map((function(e){var t=e.webformatURL,a=e.tags,c=e.largeImageURL;return Object(O.jsx)("li",{className:y.a.item,children:Object(O.jsx)("img",{src:t,alt:a,className:y.a.image,onClick:function(){return n(c,a)}})},v.a.generate())}))})},N=n(16),k=n.n(N),E=function(e){var t=e.text,n=e.onIncrement;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("button",{type:"button",className:k.a.button,onClick:n,children:t})})},C=n(12),I=n.n(C),F=document.querySelector("#root-modal");var L=function(e){Object(a.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}));var t=function(t){"Escape"===t.code&&(e.onClose(),console.log(t.code))};return Object(r.createPortal)(Object(O.jsx)("div",{className:I.a.overlay,onClick:function(t){t.target===t.currentTarget&&e.onClose()},children:Object(O.jsx)("div",{className:I.a.modal,children:e.children})}),F)},R=n(17),W=n.n(R),q=(n(54),n(18)),G=n.n(q);var J=function(){return Object(O.jsx)("div",{className:G.a.spinner,children:Object(O.jsx)(W.a,{type:"Watch",color:"#3f51b5",height:50,width:50,timeout:3e3})})};var P=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(i.a)(r,2),l=o[0],m=o[1],h=Object(a.useState)(1),f=Object(i.a)(h,2),_=f[0],x=f[1],v=Object(a.useState)("idle"),S=Object(i.a)(v,2),y=S[0],N=S[1],k=Object(a.useState)(!1),C=Object(i.a)(k,2),I=C[0],F=C[1],R=Object(a.useState)(null),W=Object(i.a)(R,2),q=W[0],G=W[1],P=Object(a.useState)(""),A=Object(i.a)(P,2),B=A[0],M=A[1],T=Object(a.useState)(null),D=Object(i.a)(T,2),H=D[0],U=D[1],Y=Object(a.useState)(!1),z=Object(i.a)(Y,2),K=z[0],Q=z[1];Object(a.useEffect)((function(){if(n){N("pending"),function(e,t){var n=b,a=d;return fetch("".concat(j,"/?q=").concat(e,"&page=").concat(t,"&key=").concat(n,"&image_type=photo&orientation=horizontal&per_page=").concat(a,"\n")).then((function(e){return e.ok?e.json():Promise.reject(new Error("Nothing was found"))}))}(n,_).then((function(e){m([].concat(Object(s.a)(l),Object(s.a)(e.hits))),N("resolved")})).catch((function(e){U(e),N("rejected")})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))}}),[n,_]);var V=function(){F(!I)};return Object(O.jsxs)("div",{className:u.a.app,children:[Object(O.jsx)(p,{onSubmit:function(e){c(e),x(1),m([])}}),"rejected"===y&&Object(O.jsx)("h2",{children:H.message}),("resolved"===y||!0===K)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(g,{children:Object(O.jsx)(w,{images:l,onOpenModal:function(e,t){V(),G(e),M(t)}})})}),Object(O.jsx)("div",{className:u.a.load_more,children:"resolved"===y&l.length>0?Object(O.jsx)(E,{onIncrement:function(){x(_+1),Q(!0)},text:"Load more"}):("pending"===y||!0===K)&&Object(O.jsx)(J,{})}),I&&Object(O.jsx)(L,{onClose:V,children:Object(O.jsx)("img",{src:q,alt:B})})]})};o.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(P,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.2c6c4a0b.chunk.js.map