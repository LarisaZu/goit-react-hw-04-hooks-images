{"version":3,"sources":["App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Spinner/spinner.module.css","components/Searchbar/Searchbar.module.css","services/images-api.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/Spinner/Spinner.js","App.js","index.js"],"names":["module","exports","fetchOptions","Searchbar","props","useState","searchValue","setSearchValue","className","s","searchbar","onSubmit","event","preventDefault","trim","alert","form","type","button","button_label","input","autoComplete","value","autoFocus","placeholder","onChange","currentTarget","toLowerCase","ImageGallery","children","gallery","ImageGalleryItem","images","onOpenModal","map","webformatURL","tags","largeImageURL","item","src","alt","image","onClick","shortid","generate","Button","text","onIncrement","modalRoot","document","querySelector","Modal","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","onClose","console","log","createPortal","overlay","target","modal","Spinner","spinner","color","height","width","timeout","App","setImages","page","setPage","status","setStatus","showModal","setShowModal","modalImageSrc","setModalImageSrc","modalImageSrcAlt","setModalImageSrcAlt","error","setError","setSpinner","query","API_KEY","ITEMS_PER_PAGE","fetch","then","response","ok","json","Promise","reject","Error","fetchApi","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","app","message","load_more","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2c6c4a0b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__267Kc\",\"load_more\":\"App_load_more__1erRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__jtPdE\",\"image\":\"ImageGalleryItem_image__1iqWw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal_overlay__1GeeW\",\"modal\":\"modal_modal__1EPO8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__1JJl_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3A6rp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__RtWq2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1mdWv\",\"form\":\"Searchbar_form__25DYF\",\"button\":\"Searchbar_button__11n2B\",\"button_label\":\"Searchbar_button_label__3RN_H\",\"input\":\"Searchbar_input__3gSFO\"};","const fetchOptions = {\n  API_KEY: '22270457-bda83cd2dccc8760a40b76a07',\n  BASE_URL: 'https://pixabay.com/api/',\n  PAGE: 1,\n  ITEMS_PER_PAGE: 12,\n};\n\nfunction fetchApi(query, page) {\n  const { API_KEY, BASE_URL, ITEMS_PER_PAGE } = fetchOptions;\n  return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${ITEMS_PER_PAGE}\n`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error('Nothing was found'));\n  });\n}\n\nexport { fetchApi, fetchOptions };\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nexport default function Searchbar (props) {\n  const [searchValue, setSearchValue] = useState('');\n \n const handleValueChange = event => {\n    setSearchValue(event.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = event => {\n    // const { searchValue } = this.state;\n    event.preventDefault();\n\n    if (searchValue.trim() === '') {\n      return alert('заполните поле для поиска');\n    }\n\n    props.onSubmit(searchValue);\n    setSearchValue('');\n  };\n\n\n    return (\n      <>\n        <header className={s.searchbar}>\n          <form onSubmit={handleSubmit} className={s.form}>\n            <button type=\"submit\" className={s.button}>\n              <span className={s.button_label}>Search</span>\n            </button>\n\n            <input\n              className={s.input}\n              type=\"text\"\n              autoComplete=\"off\"\n              value={searchValue}\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={handleValueChange}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import s from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\n\nfunction ImageGallery({ children }) {\n  return (\n    <div>\n      <ul className={s.gallery}>{children}</ul>\n    </div>\n  );\n}\n\nImageGallery.propTypes = {\n  children: PropTypes.node,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\nimport shortid from 'shortid';\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ images, onOpenModal }) {\n  return (\n    <>\n      {images.map(({ webformatURL, tags, largeImageURL }) => (\n        <li key={shortid.generate()} className={s.item}>\n          <img\n            src={webformatURL}\n            alt={tags}\n            className={s.image}\n            onClick={() => onOpenModal(largeImageURL, tags)}\n          />\n        </li>\n      ))}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.array,\n  onOpenModal: PropTypes.func,\n};\n\nexport default ImageGalleryItem;\n","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ text, onIncrement }) => {\n  return (\n    <>\n      <button type=\"button\" className={s.button} onClick={onIncrement}>\n        {text}\n      </button>\n    </>\n  );\n};\n\nButton.propTypes = {\n  text: PropTypes.string,\n  onIncrement: PropTypes.func,\n};\n\nexport default Button;\n","import React, { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './modal.module.css';\n\nconst modalRoot = document.querySelector('#root-modal');\n\nfunction Modal(props) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  });\n\n  const handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      props.onClose();\n      console.log(event.code);\n    }\n  };\n\n  const handleOverlayClick = event => {\n    if (event.target === event.currentTarget) {\n      props.onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.overlay} onClick={handleOverlayClick}>\n      <div className={s.modal}>{props.children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  children: PropTypes.node,\n  onClose: PropTypes.func,\n};\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './spinner.module.css';\n\nfunction Spinner() {\n  return (\n    <div className={s.spinner}>\n      <Loader\n        type=\"Watch\"\n        color=\"#3f51b5\"\n        height={50}\n        width={50}\n        timeout={3000}\n      />\n    </div>\n  );\n}\nexport default Spinner;\n","import React, { useState, useEffect } from 'react';\nimport s from './App.module.css';\nimport { fetchApi } from './services/images-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport ImageGalleryItem from './components/ImageGalleryItem';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport Spinner from './components/Spinner';\n\nfunction App() {\n  const [searchValue, setSearchValue] = useState(null);\n  const [images, setImages] = useState([]);\n  const [page, setPage] = useState(1);\n  const [status, setStatus] = useState('idle');\n  const [showModal, setShowModal] = useState(false);\n  const [modalImageSrc, setModalImageSrc] = useState(null);\n  const [modalImageSrcAlt, setModalImageSrcAlt] = useState('');\n  const [error, setError] = useState(null);\n  const [spinner, setSpinner] = useState(false);\n\n  useEffect(() => {\n    if (!searchValue) {\n      return;\n    }\n    // console.log('пуск');\n    const fetchImages = () => {\n      setStatus('pending');\n\n      fetchApi(searchValue, page)\n        .then(response => {\n          setImages([...images, ...response.hits]);\n          setStatus('resolved');\n        })\n        .catch(error => {\n          setError(error);\n          setStatus('rejected');\n        })\n        .finally(() => {\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        });\n    };\n    fetchImages();\n  }, [searchValue, page]);\n\n  const handleSearchbarSubmit = searchValue => {\n    setSearchValue(searchValue);\n    setPage(1);\n    setImages([]);\n  };\n\n  const loadMoreHandler = () => {\n    setPage(page + 1);\n    setSpinner(true);\n  };\n\n  const onOpenModal = (src, alt) => {\n    toggleModal();\n    setModalImageSrc(src);\n    setModalImageSrcAlt(alt);\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  return (\n    <div className={s.app}>\n      <Searchbar onSubmit={handleSearchbarSubmit} />\n      {status === 'rejected' && <h2>{error.message}</h2>}\n      {(status === 'resolved' || spinner === true) && (\n        <>\n          <ImageGallery>\n            <ImageGalleryItem images={images} onOpenModal={onOpenModal} />\n          </ImageGallery>\n        </>\n      )}\n      <div className={s.load_more}>\n        {(status === 'resolved') & (images.length > 0) ? (\n          <Button onIncrement={loadMoreHandler} text=\"Load more\" />\n        ) : (\n          (status === 'pending' || spinner === true) && <Spinner />\n        )}\n      </div>\n\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={modalImageSrc} alt={modalImageSrcAlt} />\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}