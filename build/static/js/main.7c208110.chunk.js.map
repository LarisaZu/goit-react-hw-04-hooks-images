{"version":3,"sources":["App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Spinner/spinner.module.css","services/images-api.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/Spinner/Spinner.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","fetchOptions","fetchApi","query","page","API_KEY","ITEMS_PER_PAGE","fetch","then","response","ok","json","Promise","reject","Error","Searchbar","state","searchValue","handleValueChange","event","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","alert","props","onSubmit","className","s","searchbar","this","form","type","button","button_label","input","autoComplete","autoFocus","placeholder","onChange","Component","ImageGallery","children","gallery","ImageGalleryItem","images","onOpenModal","map","id","webformatURL","tags","largeImageURL","item","src","alt","image","onClick","Button","text","onIncrement","modalRoot","document","querySelector","Modal","handleImageChange","console","log","target","handleKeyDown","code","onClose","handleOverlayClick","window","addEventListener","removeEventListener","createPortal","overlay","modal","Spinner","spinner","color","height","width","timeout","App","status","showModal","modalImageSrc","modalImageSrcAlt","error","fetchImages","prevState","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","handleSearchbarSubmit","toggleModal","modalImageAlt","prevProps","app","message","load_more","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7c208110.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__267Kc\",\"load_more\":\"App_load_more__1erRY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__jtPdE\",\"image\":\"ImageGalleryItem_image__1iqWw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal_overlay__1GeeW\",\"modal\":\"modal_modal__1EPO8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__1JJl_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3A6rp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__RtWq2\"};","const fetchOptions = {\n  API_KEY: '22270457-bda83cd2dccc8760a40b76a07',\n  BASE_URL: 'https://pixabay.com/api/',\n  PAGE: 1,\n  ITEMS_PER_PAGE: 12,\n};\n\nfunction fetchApi(query, page) {\n  const { API_KEY, BASE_URL, ITEMS_PER_PAGE } = fetchOptions;\n  return fetch(`${BASE_URL}/?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=${ITEMS_PER_PAGE}\n`).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error('Nothing was found'));\n  });\n}\n\nexport { fetchApi, fetchOptions };\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    searchValue: '',\n  };\n\n  handleValueChange = event => {\n    this.setState({ searchValue: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    const { searchValue } = this.state;\n    event.preventDefault();\n\n    if (searchValue.trim() === '') {\n      return alert('заполните поле для поиска');\n    }\n\n    this.props.onSubmit(searchValue);\n    this.setState({ searchValue: '' });\n  };\n\n  render() {\n    return (\n      <>\n        <header className={s.searchbar}>\n          <form onSubmit={this.handleSubmit} className={s.form}>\n            <button type=\"submit\" className={s.button}>\n              <span className={s.button_label}>Search</span>\n            </button>\n\n            <input\n              className={s.input}\n              type=\"text\"\n              autoComplete=\"off\"\n              value={this.state.searchValue}\n              autoFocus\n              placeholder=\"Search images and photos\"\n              onChange={this.handleValueChange}\n            />\n          </form>\n        </header>\n      </>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import s from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\n\nfunction ImageGallery({ children }) {\n  return (\n    <div>\n      <ul className={s.gallery}>{children}</ul>\n    </div>\n  );\n}\n\nImageGallery.propTypes = {\n  children: PropTypes.node,\n};\n\nexport default ImageGallery;\n","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nfunction ImageGalleryItem({ images, onOpenModal }) {\n  return (\n    <>\n      {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n        <li key={id} className={s.item}>\n          <img\n            src={webformatURL}\n            alt={tags}\n            className={s.image}\n            onClick={() => onOpenModal(largeImageURL, tags)}\n          />\n        </li>\n      ))}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.array,\n  onOpenModal: PropTypes.func,\n};\n\nexport default ImageGalleryItem;\n","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ text, onIncrement }) => {\n  return (\n    <>\n      <button type=\"button\" className={s.button} onClick={onIncrement}>\n        {text}\n      </button>\n    </>\n  );\n};\n\nButton.propTypes = {\n  text: PropTypes.string,\n  onIncrement: PropTypes.func,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './modal.module.css';\n\nconst modalRoot = document.querySelector('#root-modal');\n\nclass Modal extends Component {\n  state = {\n    src: '',\n    alt: '',\n  };\n\n  handleImageChange = event => {\n    console.log(event.target);\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n      console.log(event.code);\n    }\n  };\n\n  handleOverlayClick = event => {\n    if (event.target === event.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleOverlayClick}>\n        <div className={s.modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  children: PropTypes.node,\n  onClose: PropTypes.func,\n};\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './spinner.module.css';\n\nfunction Spinner() {\n  return (\n    <div className={s.spinner}>\n      <Loader\n        type=\"Watch\"\n        color=\"#3f51b5\"\n        height={50}\n        width={50}\n        timeout={3000}\n      />\n    </div>\n  );\n}\nexport default Spinner;\n","import React, { Component } from 'react';\nimport s from './App.module.css';\nimport { fetchApi } from './services/images-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport ImageGalleryItem from './components/ImageGalleryItem';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport Spinner from './components/Spinner';\n\nclass App extends Component {\n  state = {\n    searchValue: '',\n    images: [],\n    page: 1,\n    status: 'idle',\n    showModal: false,\n    modalImageSrc: null,\n    modalImageSrcAlt: '',\n    error: null,\n    spinner: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchValue !== this.state.searchValue) {\n      this.fetchImages();\n    }\n    if (prevState.page !== this.state.page) {\n      this.setState({ spinner: true });\n    }\n  }\n\n  fetchImages = () => {\n    const { searchValue, page } = this.state;\n    this.setState({ status: 'pending' });\n    if (!searchValue) return;\n    fetchApi(searchValue, page)\n      .then(response => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...response.hits],\n          page: prevState.page + 1,\n          status: 'resolved',\n        }));\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }))\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n  };\n\n  handleSearchbarSubmit = searchValue => {\n    this.setState({ searchValue, page: 1, images: [] });\n  };\n\n  onOpenModal = (src, alt) => {\n    this.toggleModal();\n    this.setState(state => ({ modalImageSrc: src, modalImageAlt: alt }));\n  };\n\n  toggleModal = () => {\n    this.setState(state => ({ showModal: !state.showModal }));\n  };\n\n  render() {\n    const {\n      images,\n      error,\n      status,\n      spinner,\n      showModal,\n      modalImageSrc,\n      modalImageSrcAlt,\n    } = this.state;\n    return (\n      <div className={s.app}>\n        <Searchbar onSubmit={this.handleSearchbarSubmit} />\n        {status === 'rejected' && <h2>{error.message}</h2>}\n        {(status === 'resolved' || spinner === true) && (\n          <>\n            <ImageGallery>\n              <ImageGalleryItem\n                images={images}\n                onOpenModal={this.onOpenModal}\n              />\n            </ImageGallery>\n          </>\n        )}\n        <div className={s.load_more}>\n          {(status === 'resolved') & (images.length > 0) ? (\n            <Button onIncrement={this.fetchImages} text=\"Load more\" />\n          ) : (\n            (status === 'pending' || spinner === true) && <Spinner />\n          )}\n        </div>\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={modalImageSrc} alt={modalImageSrcAlt} />\n          </Modal>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1mdWv\",\"form\":\"Searchbar_form__25DYF\",\"button\":\"Searchbar_button__11n2B\",\"button_label\":\"Searchbar_button_label__3RN_H\",\"input\":\"Searchbar_input__3gSFO\"};"],"sourceRoot":""}